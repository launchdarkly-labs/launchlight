<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Launchlight Injector Example</title>
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; padding: 24px; }
      .container { max-width: 720px; margin: 0 auto; }
      .hero { padding: 24px; border: 1px solid #ddd; border-radius: 8px; }
      .hero h1 { margin: 0 0 8px; font-size: 28px; }
      .hero p { margin: 0 0 12px; color: #666; }
      .hero .cta { background: #2563eb; color: white; padding: 10px 14px; border-radius: 6px; border: 0; cursor: pointer; }
    </style>
  </head>
  <body>
    <div class="container">
      <h2>Plain HTML Example</h2>
      <p>This page loads the injector IIFE bundle and initializes it. Replace placeholder values with your LaunchDarkly client-side ID and flag.</p>

      <div class="hero" data-webexp-container="true">
        <h1 id="title">Welcome to our site</h1>
        <p id="subtitle">This headline and text can be changed by web experiments.</p>
        <button class="cta" id="cta">Get Started</button>
      </div>

      <pre id="log" style="margin-top:16px;background:#f6f8fa;padding:12px;border-radius:6px;overflow:auto"></pre>
    </div>

    <!-- Load the IIFE build (ensure you've run the injector build) -->
    <script src="../../packages/injector/dist/index.umd.js"></script>
    <script>
      (function () {
        const log = (msg) => {
          const el = document.getElementById('log');
          el.textContent += msg + "\n";
        };

        if (!window.WebExpInjector) {
          log('Injector global not found. Build the injector first: pnpm -w --filter @webexp/injector build');
          return;
        }

        // Replace with your LaunchDarkly Client-side ID and flag key
        const clientSideId = 'YOUR_LD_CLIENT_SIDE_ID';
        const flagKey = 'your-webexp-flag-key';

        window.WebExpInjector.init({
          clientSideId,
          flagKey,
          spaMode: true,
          debug: true,
          context: { kind: 'user', key: 'example-user', anonymous: true }
        }).then(() => {
          log('Injector initialized');
        }).catch((e) => {
          log('Injector failed: ' + (e && e.message ? e.message : e));
        });
      })();
    </script>
  </body>
</html>
